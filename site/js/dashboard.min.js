!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery.cloudinary","angular"],t):t(window.jQuery,angular)}(function(t,r){var n=r.module("cloudinary",[]),i=function(t){return t.match(/cl[A-Z]/)&&(t=t.substring(2)),t.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()};["Src","Srcset","Href"].forEach(function(r){var e="cl"+r;r=r.toLowerCase(),n.directive(e,["$sniffer",function(n){return{priority:99,link:function(o,a,c){var u=r,f=r;"href"===r&&"[object SVGAnimatedString]"===toString.call(a.prop("href"))&&(f="xlinkHref",c.$attr[f]="xlink:href",u=null),c.$observe(e,function(r){if(r){var e={};t.each(a[0].attributes,function(){e[i(this.name)]=this.value}),r=t.cloudinary.url(r,e),c.$set(f,r),n.msie&&u&&a.prop(u,c[f])}})}}}])}),n.directive("clTransformation",[function(){return{restrict:"E",transclude:!1,require:"^clImage",link:function(r,n,e,o){var a={};t.each(e,function(t,r){"$"!==t[0]&&(a[i(t)]=r)}),o.addTransformation(a)}}}]),n.directive("clImage",[function(){var r=function(t){this.addTransformation=function(r){t.transformations=t.transformations||[],t.transformations.push(r)}};return r.$inject=["$scope"],{restrict:"E",replace:!0,transclude:!0,template:"<img ng-transclude/>",scope:{},priority:99,controller:r,link:function(r,n,e){var o={},a=null;t.each(e,function(t,r){o[i(t)]=r}),r.transformations&&(o.transformation=r.transformations),e.$observe("publicId",function(t){t&&(a=t,c())}),e.$observe("version",function(t){t&&(o.version=t,c())}),e.htmlWidth?n.attr("width",e.htmlWidth):n.removeAttr("width"),e.htmlHeight?n.attr("height",e.htmlHeight):n.removeAttr("height");var c=function(){var r=t.cloudinary.url(a,o);n.attr("src",r)}}}}])});
$.cloudinary.config().cloud_name="dufu2ezs3",$.cloudinary.config().upload_preset="gfp93dqn";
angular.module("RDash",["ui.bootstrap","ui.router","ngCookies","ngFileUpload","xeditable"]);
"use strict";angular.module("RDash").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("login",{url:"/login",templateUrl:"templates/login.html",controller:"LoginController as LoginController"}).state("saveRecipe",{url:"/saveRecipe",templateUrl:"templates/detailRecipe.html",controller:"SaveRecipe as SaveRecipe",data:{requireLogin:!0}}).state("updateRecipe",{url:"/detailRecipe/:id",templateUrl:"templates/detailRecipe.html",controller:"UpdateRecipe as UpdateRecipe",data:{requireLogin:!0}}).state("listRecipe",{url:"/listRecipe",templateUrl:"templates/listRecipe.html",controller:"ConsultRecipe as ConsultRecipe",data:{requireLogin:!0}})}]).run(["$rootScope","$location","Auth",function(e,t,o){e.$on("$routeChangeStart",function(e){o.isLoggedIn()?(console.log("ALLOW"),t.path("/home")):(console.log("DENY"),e.preventDefault(),t.path("/login"))})}]).factory("Auth",function(){var e;return{setUser:function(t){e=t},isLoggedIn:function(){return e?e:!1}}}).factory("TitleService",function(){var e="Home";return{setTitle:function(t){e=t},getTitle:function(){return e}}});
function AlertsCtrl(e){e.alerts=[{type:"success",msg:"Thanks for visiting! Feel free to create pull requests to improve the dashboard!"},{type:"danger",msg:"Found a bug? Create an issue with as many details as you can."}],e.addAlert=function(){e.alerts.push({msg:"Another alert!"})},e.closeAlert=function(t){e.alerts.splice(t,1)}}angular.module("RDash").controller("AlertsCtrl",["$scope",AlertsCtrl]);
var app=angular.module("RDash");app.controller("ConsultRecipe",["$scope","$rootScope","$location","$http","Auth","TitleService",function(e,n,o,i,t,a){a.setTitle("Consultar Receita"),t.isLoggedIn()||console.log("DENY"),e.loading="none",e.alerts=[],e.recipes=[],e.consult=function(){e.alerts=[],e.recipes=[],e.loading="true",i({method:"GET",url:"http://mean-pingy.rhcloud.com/api/recipeRetrieve"}).then(function(n){angular.forEach(n.data,function(n){var o=JSON.parse(n.recipe);o.id=n._id,e.recipes.push({name:o.name,id:n._id})}),e.loading="none"},function(n){console.log(n),e.loading="none"})}}]);
var app=angular.module("RDash");app.controller("LoginController",["$scope","$rootScope","$location","$http","Auth",function(n,o,e,a,i){n.loading="none",n.alerts=[],n.recipes=[],n.consult=function(){n.alerts=[],n.recipes=[],n.loading="true",a({method:"GET",url:"http://mean-pingy.rhcloud.com/api/recipeRetrieve"}).then(function(o){angular.forEach(o.data,function(o){var e=JSON.parse(o.recipe);e.id=o._id,n.recipes.push({name:e.name,id:o._id})}),n.loading="none"},function(o){console.log(o),n.loading="none"})}}]);
function MasterCtrl(t,e,g){var o=992;t.path="Home",t.$watch(function(){return g.getTitle()},function(e,o){t.path=g.getTitle()}),t.getWidth=function(){return window.innerWidth},t.$watch(t.getWidth,function(g,n){g>=o?angular.isDefined(e.get("toggle"))?t.toggle=e.get("toggle")?!0:!1:t.toggle=!0:t.toggle=!1}),t.toggleSidebar=function(){t.toggle=!t.toggle,e.put("toggle",t.toggle)},window.onresize=function(){t.$apply()}}angular.module("RDash").controller("MasterCtrl",["$scope","$cookieStore","TitleService",MasterCtrl]);
var app=angular.module("RDash");app.controller("SaveRecipe",["$scope","$rootScope","$location","Upload","$http","Auth","TitleService",function(e,i,t,o,n,r,c){c.setTitle("Cadastrar Receita"),r.isLoggedIn()||console.log("DENY"),e.loading="none",e.displayDelete="none",e.alerts=[],e.recipe={},e.file={},e.ingredientList=[],e.instructionList=[],e.category=[{text:"Bebidas",check:!1,bit_position:0},{text:"Bolos e Tortas",check:!1,bit_position:1},{text:"Carnes e Aves",check:!1,bit_position:2},{text:"Doces e Sobremesas",check:!1,bit_position:3},{text:"Lanches",check:!1,bit_position:4},{text:"Massa",check:!1,bit_position:5},{text:"Pães",check:!1,bit_position:6},{text:"Peixe o frutos do Mar",check:!1,bit_position:7},{text:"Saladas e Molhos",check:!1,bit_position:8},{text:"Sopa",check:!1,bit_position:9},{text:"Sucos",check:!1,bit_position:10}],e.save=function(i){e.alerts=[],e.validade()&&(e.loading="true",i&&!i.$error?i.upload=o.upload({url:"https://api.cloudinary.com/v1_1/"+$.cloudinary.config().cloud_name+"/upload",fields:{upload_preset:$.cloudinary.config().upload_preset},file:i}).success(function(i,t,o,r){var c=i.url,a=i.public_id;e.recipe.file=[{url:c,public_id:a}],e.prepare();var s=JSON.stringify(e.recipe);console.log(s),n({method:"GET",url:"http://mean-pingy.rhcloud.com/api/recipeCreate?recipe="+s}).then(function(i){console.log(i),e.loading="none",e.addAlert("success","Receita salva com sucesso")},function(i){console.log(i),e.loading="none",e.addAlert("danger","Alguma coisa errada aconteceu")})}).error(function(i,t,o,n){console.log(i),e.loading="none",e.addAlert("danger","Erro ao fazer upload da imagem")}):e.addAlert("danger","Imagem nao foi encontrada"))},e.addIngredient=function(){this.ingredientDescription&&e.ingredientList.push({description:this.ingredientDescription}),this.ingredientDescription=""},e.removeIngredient=function(i){e.ingredientList.splice(i,1)},e.addInstruction=function(){this.instructionDescription&&e.instructionList.push({description:this.instructionDescription}),this.instructionDescription=""},e.removeInstruction=function(i){e.instructionList.splice(i,1)},e.addAlert=function(i,t){e.alerts.push({type:i,msg:t})},e.closeAlert=function(i){e.alerts.splice(i,1)},e.prepare=function(){e.recipe.category=e.bategoriesToBit(),e.recipe.ingredient=[],e.recipe.instruction=[],angular.forEach(e.ingredientList,function(i){e.recipe.ingredient.push(i.description)}),angular.forEach(e.instructionList,function(i){e.recipe.instruction.push(i.description)})},e.bategoriesToBit=function(){var i=0;return angular.forEach(e.category,function(e){e.check&&(i|=1<<e.bit_position)}),i},e.validade=function(){var i=!0;e.recipe.name||(e.addAlert("danger","Nome é obrigatório"),i=!1),e.recipe.description||(e.addAlert("danger","Descrição é obrigatório"),i=!1),e.recipe.timeToPrepare||(e.addAlert("danger","Tempo de Preparo é obrigatório"),i=!1),e.recipe.servings||(e.addAlert("danger","Porções é obrigatório"),i=!1);var t=!1;return angular.forEach(e.category,function(e){e.check&&(t=!0)}),t||(e.addAlert("danger","Escolha pelo menos uma categoria!"),i=!1),0==e.ingredientList.length&&(e.addAlert("danger","Informe pelo menos um ingrediente"),i=!1),0==e.instructionList.length&&(e.addAlert("danger","Informe pelo menos uma instrução"),i=!1),i}}]);
var app=angular.module("RDash");app.controller("UpdateRecipe",["$scope","$rootScope","$location","Upload","$http","Auth","TitleService",function(e,o,t,n,r,c,a){function s(i){e.loading="true",i.upload=n.upload({url:"https://api.cloudinary.com/v1_1/"+$.cloudinary.config().cloud_name+"/upload",fields:{upload_preset:$.cloudinary.config().upload_preset},file:i}).success(function(e,i,o,t){var n=e.url,r=e.public_id;console.log(n),console.log(r),l(r,n)}).error(function(i,o,t,n){console.log(i),e.loading="none",e.addAlert("danger","Erro ao fazer upload da imagem")})}function l(i,o){e.loading="true",e.recipe.file=[{url:o,public_id:i}],d();var t=JSON.stringify(e.recipe),n="http://mean-pingy.rhcloud.com/api/recipeUpdate?recipe="+t+"&id="+e.recipe.id;console.log(n),r({method:"GET",url:n}).then(function(i){console.log("successCallback"),console.log(i),e.loading="none",e.addAlert("success","Receita salva com sucesso")},function(i){console.log("errorCallback"),console.log(i),e.loading="none",e.addAlert("danger","Alguma coisa errada aconteceu")})}function d(){e.recipe.category=p(),e.recipe.ingredient=[],e.recipe.instruction=[],angular.forEach(e.ingredientList,function(i){e.recipe.ingredient.push(i.description)}),angular.forEach(e.instructionList,function(i){e.recipe.instruction.push(i.description)})}function p(){var i=0;return angular.forEach(e.category,function(e){e.check&&(i|=1<<e.bit_position)}),i}function u(i){var o=!0;(!e.file.path||!i&&i.$error)&&(e.addAlert("danger","Imagem nao foi encontrada"),o=!1),e.recipe.name||(e.addAlert("danger","Nome é obrigatório"),o=!1),e.recipe.description||(e.addAlert("danger","Descrição é obrigatório"),o=!1),e.recipe.timeToPrepare||(e.addAlert("danger","Tempo de Preparo é obrigatório"),o=!1),e.recipe.servings||(e.addAlert("danger","Porções é obrigatório"),o=!1);var t=!1;return angular.forEach(e.category,function(e){e.check&&(t=!0)}),t||(e.addAlert("danger","Escolha pelo menos uma categoria!"),o=!1),0==e.ingredientList.length&&(e.addAlert("danger","Informe pelo menos um ingrediente"),o=!1),0==e.instructionList.length&&(e.addAlert("danger","Informe pelo menos uma instrução"),o=!1),o}a.setTitle("Atualizar Receita"),c.isLoggedIn()||console.log("DENY"),e.init=function(){e.loading="true";var o=t.url().replace("/detailRecipe/","");r({method:"GET",url:"http://mean-pingy.rhcloud.com/api/retrieveById?id="+o}).then(function(o){var t=o.data[0];console.log(t);var n=JSON.parse(t.recipe);n.id=t._id,e.file.path=n.file[0].url,e.file.id=n.file[0].public_id,e.recipe=n,console.log(e.recipe),angular.forEach(e.recipe.ingredient,function(i){e.ingredientList.push({description:i})}),angular.forEach(e.recipe.instruction,function(i){e.instructionList.push({description:i})});var r=e.recipe.category;for(i=0;i<10;i++){var c=1<<i,a=r&c,s=a>>i;1==s&&(e.category[i].check=!0)}e.loading="none"},function(i){console.log(i),e.loading="none",e.addAlert("danger","Alguma coisa errada aconteceu")})},e.loading="none",e.displayDelete="true",e.alerts=[],e.recipe={},e.file={},e.ingredientList=[],e.instructionList=[],e.category=[{text:"Bebidas",check:!1,bit_position:0},{text:"Bolos e Tortas",check:!1,bit_position:1},{text:"Carnes e Aves",check:!1,bit_position:2},{text:"Doces e Sobremesas",check:!1,bit_position:3},{text:"Lanches",check:!1,bit_position:4},{text:"Massa",check:!1,bit_position:5},{text:"Pães",check:!1,bit_position:6},{text:"Peixe o frutos do Mar",check:!1,bit_position:7},{text:"Saladas e Molhos",check:!1,bit_position:8},{text:"Sopa",check:!1,bit_position:9},{text:"Sucos",check:!1,bit_position:10}],e.save=function(i){e.alerts=[],u(i)&&(i&&!i.$error?s(i):l(e.file.id,e.file.path))},e.addIngredient=function(){this.ingredientDescription&&e.ingredientList.push({description:this.ingredientDescription}),this.ingredientDescription=""},e.removeIngredient=function(i){e.ingredientList.splice(i,1)},e.addInstruction=function(){this.instructionDescription&&e.instructionList.push({description:this.instructionDescription}),this.instructionDescription=""},e.removeInstruction=function(i){e.instructionList.splice(i,1)},e.addAlert=function(i,o){e.alerts.push({type:i,msg:o})},e.closeAlert=function(i){e.alerts.splice(i,1)}}]);
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("RDash").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("RDash").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("RDash").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("RDash").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("RDash").directive("rdWidget",rdWidget);